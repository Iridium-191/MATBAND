%%本工程文件为Iridium-191原创内容，若有其他用途请联系原作者（B站ID：385867593）
[y,fs]=audioread('标准C5.wav');%导入音频文件
[k,ft]=audioread('标准mi.wav');
y=stretchAudio(y,1.4);%时值伸缩
kk=resample(k,1408,1046);
do0l = (shiftPitch(y,-12))';%以下为mat音符单位
do0m = splitm(do0l);
do0s = splits(do0l);
do1l = y';
do1m = splitm(do1l);
do1s = splits(do1l);
do2l = (shiftPitch(y,12))';
do2m = splitm(do2l);
do2s = splits(do2l);
tts = shiftPitch(kk,12);
ttf = stretchAudio(tts,34410/38905);
do3l = 10*combination1(ttf,311);
do3m = splitm(do3l);
do3s = splits(do3l);
re0l = (shiftPitch(y,-10))';
re0m = splitm(re0l);
re0s = splits(re0l);
re1l = (shiftPitch(y,2))';
re1m = splitm(re1l);
re1s = splits(re1l);
re2l = (shiftPitch(y,14))';
re2m = splitm(re2l);
re2s = splits(re2l);
kkk = shiftPitch(kk,14);
yuu = stretchAudio(kkk,34410/38905);
re3l=10*combination1(yuu,311);
re3m=splitm(re3l);
mi0l = (shiftPitch(y,-8))';
mi0m = splitm(mi0l);
mi0s = splits(mi0l);
mib0l = (shiftPitch(y,-9))';
mib0m = splitm(mib0l);
mib1l =(shiftPitch(y,3))';
mib1m = splitm(mib1l);
mi0s = splits(mib0l);
mi1l = (shiftPitch(y,4))';
mi1m = splitm(mi1l);
mi1s = splits(mi1l);
mi2l = (shiftPitch(y,16))';
mi2m = splitm(mi2l);
mib2l = (shiftPitch(y,15))';
mib2m=splitm(mib2l);
mi2s = splits(mi2l);
fa0l = (shiftPitch(y,-7))';
fa00l=(shiftPitch(y,-19))';
fa00m = splitm(fa00l);
fa0m = splitm(fa0l);
fa0s = splits(fa0l);
fa1l = (shiftPitch(y,5))';
fa1m = splitm(fa1l);
fa1s = splits(fa1l);
fa2l = (shiftPitch(y,17))';
fa2m = splitm(fa2l);
fa2s = splits(fa2l);
so0l = (shiftPitch(y,-5))';
so00l = (shiftPitch(y,-17))';
so00m = splitm(so00l);
so0m = splitm(so0l);
so0s = splits(so0l);
so1l = (shiftPitch(y,7))';
so1m = splitm(so1l);
so1s = splits(so1l);
so2l = (shiftPitch(y,19))';
so2m = splitm(so2l);
so2s = splits(so2l);
lab00l=(shiftPitch(y,-16))';
lab00m = splitm(lab00l);
lab0l = (shiftPitch(y,-4))';
lab0m = splitm(lab0l);
la0l = (shiftPitch(y,-3))';
la0m = splitm(la0l);
la0ll= combination(la0l);
la00l = (shiftPitch(y,-15))';
la00m = splitm(la00l);
la0s = splits(lab0l);
la1l = (shiftPitch(y,9))';
la1m = splitm(la1l);
la1s = splits(la1l);
la2l = (shiftPitch(y,21))';
la2m = splitm(la2l);
la2s = splits(la2l);
la2ml = splitml(la2l);
xi0l = (shiftPitch(y,-1))';
xi0m = splitm(xi0l);
xibol=(shiftPitch(y,-2))';
xib0m = splitm(xibol);
xib00l=(shiftPitch(y,-14))';
xib00m = splitm(xib00l);
xi0s = splits(xi0l);
xi1l = (shiftPitch(y,11))';
xi1m = splitm(xi1l);
xi1s = splits(xi1l);
kky = shiftPitch(kk,11);
yyu = stretchAudio(kky,34410/38905);
xi2l=10*combination1(yyu,311);
xi2m = splitm(xi2l);
xi2s = splits(xi2l);
blkl = zeros(2,38905);
blkm = zeros(2,19453);
blks = zeros(2,9726);%以下fireworks内容为曲谱
fireworksright=[blks re2s mi2s so2s do3s xi2s so2m ...
    mi2m re2s mi2s so2s re2s mi2s so2s ...
    mi2m la2m so2m mi2m ...
    re2m re2s mi2s so2s re2s mi2s so2s ...
    re2m mi2m do2m re2m ...
    la1m la1s so1s la1s so1s la1s do2s ...
    la1m do2m re2m mi2m ...
    re2m re2s mi2s so2s re2s mi2s so2s ...
    re2m mi2m do2m do2s re2s ...
    mi2s so2s mi2l so1s la1s ...
    do2s re2s do2l do2s re2s ...
    mi2s so2s mi2l do3s xi2s ...
    so2m 0.5*do3s 0.5*xi2s 0.5*so2m do2s re2s ...
    mi2s so2s mi2l so1s la1s ...
    do2s re2s do2l do2s re2s ...
    mi2s so2s mi2l blkm ...
    so2l do3s xi2s so2m ...
    la2s 0.5*do1s 0.5*so1s 0.5*la1s do2m+mi2m re2m ...
    0.5*(do2s+re2s) 0.5*re1s 0.5*la1s 0.5*do2s re2s+so2s do2s re2m ...
    do2s+mi2s mi1s do2s re2s mi2l ...
    blkl do3s xi2s so2m ...
    la2s 0.5*do1s 0.5*so1s 0.5*la1s do2m+mi2m re2m ...
    0.5*(do2s+re2s) 0.5*re1s 0.5*la1s 0.5*do2s so1s+re2s do2s re2m ...%弱音可以乘上分数因子
    do2s+mi2s 0.5*mi1s 0.5*do2s 0.5*re2s mi2m re2s mi2s ...
    so2l do3s xi2s so2m ...
    la2s 0.5*do1s 0.5*so1s la1s do2m+mi2m re2m ...
    do2s+re2s 0.5*re1s 0.5*la1s 0.5*do2s re2s+so2s do2s re2m ...
    do2m+mi2m so2m do2m re2m ...
    do2l so1m xi1m ... 
    do2s 0.5*do1s 0.5*so1s 0.5*do2s mi2l+so2l ...
    re2s 0.5*re1s 0.5*la1s 0.5*do1s so1l+xi1l ...
    so1s+do2s mi1s*0.5 do2s*0.5 re2s*0.5 mi2l ...
    do3s so2s la2s so2s so2s+do3s mi2s+xi2s re2m+so2m ...
    blks so1s la1s do1s re2m so2m ...
    mi2l re2m do2s la1s ...
    blks so1s la1s do2s re2m so2m ...
    mi2l do3m so2m ...
    blks so1s la1s do2s re2m so2m ...
    mi2l re2m do2m ...
    do2l blkl ...
    do3s xi2s so2s mi2s re2s mi2s so2m ...
    mi2m do2s re2s mi2s do2s so2s do2s ...
    mi2m do2s re2s mi2s do2s so2s do2s ...
    mi2m do2s re2s mi2s do2s so2s do2s ...
    mi2m do2s re2s mi2s do2s so2s do2s ...
    mib2m do2s re2s mi2s do2s so2s do2s ...
    mib2m do2s re2s mi2s do2s so2s do2s ...
    re2m do2m re2m so2m ...
    re2m do2m re2m so2m ...
    xi1l+re2l blkl ...
    blkl blkm do2s re2s ...
    mi2s so2s mi2l so1s la1s ...
    do2s re2s do2l do2s re2s ...
    mi2s so2s mi2l do3s xi2s ...
    so2m 0.5*do3s 0.5*xi2s 0.5*so2m do2s re2s ... 
    mi2s so2s mi2l so1s la1s ...
    do2s re2s do2l do2s re2s ...
    mi2s so2s mi2l blkm ...
    blkl blkm do2s re2s ...
    mi2s so2s mi2l so1s la1s ...
    do2s re2s do2l do2s re2s ...
    mi2s so2s mi2l do3s xi2s ...
    so2m 0.5*do3s 0.5*xi2s 0.5*so2m do2s re2s ...
    mi2s so2s mi2l so1s la1s ...
    do2s re2s do2l do2s re2s ... 
    do2s re2s do2l blkm ...
    blkl do3s xi2s so2m ...
    la2l so2s mi2s re2m ...
    do2l re2s do2s re2m ...
    mi2l blkl ...
    so2l do3s xi2s so2m ...
    la2l so2s mi2s re2m ...
    do2l re2s do2s re2m ...
    do2l blkl ...
    blkl do3s xi2s so2m ...
    la2l so2s mi2s re2m ...
    do2l re2s do2s re2m ...
    mi2m do2m so2m re3m ...
    blkl blkl];%以下为左手部分
fireworksleft=[blkl blkl ...
    la1l la1l ...
    do2l do2l ...
    fa1l fa1l ...
    so1l so1l ...
    la0l la0l ...
    do1l do1l ...
    fa0l fa0l ...
    so0l so0l ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0ll ...
    blkl ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0m mi0m ...
    la0m mi0m blkl ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0m mi0m ...
    la0m mi0m blkl ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0m mi0m ...
    do0m so0m do1l ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0m mi0m ...
    do0m so0m do1l ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0l ...
    la00m mi0m la0m mi0m ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0l ...
    do0m so0m do1l ...
    fa00m do0m fa0l ...
    so00m re0m so0l ...
    la00m mi0m la0m mi0m ...
    la0m mi0m la0m mi0m ...
    xib00m fa0m xib0m fa0m ...
    do1l re1l ...
    do0m so0m do1m so0m ...
    mi1m do1m so0m mi0m ...
    lab00m+do0m+mib0m lab0m do1m re1m ...
    mib1m lab0m fa0m la0m ...
    la00l+do0l+la0l do0l ...
    re0l do0l ...
    so0l+xi0l blkl ...
    blkl blkl ...
    fa0l blkl ...
    so0l blkl ...
    la0l blkl ...
    la0l blkl ...
    fa0l blkl ...
    so0l blkl ...
    la0l blkl ...
    la0l blkl ...
    fa0l blkl ...
    so0l blkl ...
    la0l blkl ...
    la0l blkl ...
    fa0l blkl ...
    so0l blkl ...
    la0l blkl ...
    la0l blkl ...
    fa1l blkl ...
    so1l blkl ...
    la1l blkl ...
    la1l blkl ...
    fa1l blkl ...
    so1l blkl ...
    la1l blkl ...
    la1l blkl ...
    fa1l blkl ...
    so1l blkl ...
    la1l blkl ...
    la2l blkl];
fireworksleft=[fireworksleft zeros(2,972-788)];%加上了零矩阵补足差距
fireworks=fireworksleft+fireworksright;%曲谱合成
sound(fireworks,fs);%发声指令